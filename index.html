<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="google-adsense-account" content="ca-pub-7258774526539144">
    <title>ë‘ë°”ì´ì«€ë“ì¿ í‚¤: ì‚¬ë¨¹ì ì„œë¯¼ë“¤ì•„</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7258774526539144" crossorigin="anonymous"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');
        * { box-sizing: border-box; }
        
        html, body { 
            height: 100%; width: 100%; margin: 0; padding: 0; 
            overflow: hidden; background: #1a1a1a; 
        }

        body {
            display: flex;
            flex-direction: column;
            text-align: center; 
            font-family: 'Jua', sans-serif; 
            color: white; 
            touch-action: none; 
            overscroll-behavior-y: none; /* ì•„ì´í° ë‹¹ê²¨ì„œ ìƒˆë¡œê³ ì¹¨ ë°©ì§€ */
        }

        /* ê´‘ê³  ì˜ì—­ ë†’ì´ ìœ ì§€ ë° ë°€ë¦¼ ë°©ì§€ */
        .ad-top {
            background: #333; height: 50px !important; min-height: 50px !important;
            flex-shrink: 0; display: flex; align-items: center; justify-content: center;
        }

        #ui-header {
            padding: 15px 10px; background: #222; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            flex-shrink: 0; height: 120px; border-bottom: 2px solid #444; position: relative;
        }

        .ad-bottom {
            background: #333; height: 100px !important; min-height: 100px !important;
            flex-shrink: 0; border-top: 4px solid #444;
        }

        /* ì¤‘ì•™ ê²Œì„ ì˜ì—­: ì—¬ê¸°ê°€ ìœ ë™ì ìœ¼ë¡œ ë³€í•˜ë©° ë°€ë¦¼ì„ í¡ìˆ˜í•©ë‹ˆë‹¤ */
        #game-container {
            flex-grow: 1; position: relative; width: 100%;
            background: #222; display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }

        canvas { display: block; background: #2c2c2c; max-width: 100%; max-height: 100%; }

        /* ê¸°ì¡´ UI ìŠ¤íƒ€ì¼ ë³µêµ¬ */
        .title { color: #ffeb3b; font-size: 1.4rem; margin-bottom: 5px; }
        .price-tag { color: #ff5252; font-size: 1.1rem; }
        .stats-text { font-size: 1.2rem; color: #4caf50; }
        .time-text { font-size: 1.1rem; color: #2196f3; }
        
        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 100; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        #start-screen { background-image: url('start.png'); background-size: cover; background-position: center; }
        .start-content { background: rgba(0, 0, 0, 0.7); padding: 30px; border-radius: 20px; margin-bottom: 20px; backdrop-filter: blur(5px); }
        .btn-main { padding: 15px 40px; font-size: 1.8rem; font-family: 'Jua'; background: #4caf50; color: white; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 5px 0 #2e7d32; }

        /* êµ¬ë§¤ ë²„íŠ¼ ë””ìì¸ ë³µêµ¬ */
        #buy-btn-mobile { 
            position: absolute; top: 50%; right: 15px; transform: translateY(-50%); 
            width: 75px; height: 75px; border-radius: 50%; border: none; background: #555; 
            z-index: 50; box-shadow: 0 6px 0 #333; overflow: hidden;
        }
        #buy-btn-mobile.active { background: #ffeb3b; box-shadow: 0 6px 0 #c4a700; }
        #buy-btn-mobile img { width: 100%; height: 100%; object-fit: cover; opacity: 0.6; }
        #buy-btn-mobile.active img { opacity: 1; }
        #buy-btn-text-mobile { position: absolute; bottom: 5px; left: 0; right: 0; font-size: 0.75rem; color: white; text-shadow: 1px 1px 2px #000; font-weight: bold; text-align: center; }

        /* ì¸ìŠ¤íƒ€ ë²„íŠ¼ ê·¸ë¼ë°ì´ì…˜ ë³µêµ¬ */
        .insta-btn {
            padding: 8px 16px; background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);
            color: white; border-radius: 20px; text-decoration: none; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 6px; margin-top: 10px;
        }

        #msg-pop { position: absolute; width: 100%; top: 30%; font-size: 2.2rem; display: none; text-shadow: 3px 3px #000; z-index: 20; font-weight: bold; }
        #interstitial-ad { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 200; display: none; flex-direction: column; align-items: center; justify-content: center; }

        @media (min-width: 769px) {
            #buy-btn { position: absolute; top: 50%; right: 20px; transform: translateY(-50%); width: 90px; height: 90px; border-radius: 50%; border: none; background: #555; cursor: pointer; overflow: hidden; display: block; }
            #buy-btn.active { background: #ffeb3b; }
            #buy-btn img { width: 100%; height: 100%; object-fit: cover; }
            #buy-btn-text { position: absolute; bottom: 8px; left: 0; right: 0; font-size: 0.9rem; color: white; font-weight: bold; }
            #buy-btn-mobile { display: none; }
        }
        @media (max-width: 768px) { #buy-btn { display: none; } }
    </style>
</head>
<body oncontextmenu="return false;">
    <div class="ad-top">
        <ins class="adsbygoogle" style="display:block;width:100%;height:50px" data-ad-client="ca-pub-7258774526539144" data-ad-slot="4113884601" data-ad-format="horizontal"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <div style="font-size: 0.7rem; color: #666; padding: 5px 0; background: #222; border-bottom: 1px solid #444;">Â© 2026 dubaijjondeukcookie. All rights reserved.</div>

    <div id="ui-header">
        <div class="title">ğŸ’¸ ë–¡ìƒí•˜ëŠ” ë‘ì«€ì¿ </div>
        <div class="price-tag">ì‹œì„¸: <span id="current-price">4,000</span>ì›</div>
        <div class="stats-text">ì”ê³ : <span id="money">0</span>ì› | ì¿ í‚¤: <span id="inventory" style="color:#ffeb3b">0</span>ê°œ</div>
        <div class="time-text">ê¸°ë¡: <span id="play-time">0</span>ì´ˆ | ìµœê³ : <span id="best-time">-</span></div>
        <button id="buy-btn-mobile" onclick="buyCookie()">
            <img src="dubai.png"><span id="buy-btn-text-mobile">ëˆ ë¶€ì¡±</span>
        </button>
    </div>

    <div id="game-container">
        <div id="start-screen" class="overlay">
            <div class="start-content">
                <h1 style="color:#ffeb3b; margin:0;">ğŸª<br>ë‘ë°”ì´ì«€ë“ì¿ í‚¤</h1>
                <p>ë¬¼ê°€ë¥¼ ëš«ê³  10ê°œë¥¼ ëª¨ìœ¼ì„¸ìš”!</p>
                <a href="https://www.instagram.com/dubai_jjjondeuk_cookie/" target="_blank" class="insta-btn">ì¸ìŠ¤íƒ€ê·¸ë¨</a>
            </div>
            <div style="display:flex; gap:10px;">
                <button class="btn-main" onclick="startGame()">ì‹œì‘</button>
                <button class="btn-main" style="background:#666; font-size:1.2rem;" onclick="showInfo()">ë°©ë²•</button>
            </div>
            <button class="btn-main" style="margin-top:15px; background:#4A90E2; font-size:1rem; padding:10px 20px;" onclick="shareGame()">ğŸ”— ë§í¬ ê³µìœ </button>
        </div>

        <div id="msg-pop"></div>
        <canvas id="gameCanvas"></canvas>
        <button id="buy-btn" onclick="buyCookie()">
            <img src="dubai.png"><span id="buy-btn-text">ëˆ ë¶€ì¡±</span>
        </button>
    </div>

    <div class="ad-bottom">
        <ins class="adsbygoogle" style="display:block;width:100%;height:100px" data-ad-client="ca-pub-7258774526539144" data-ad-slot="3832164645" data-ad-format="horizontal"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <div id="interstitial-ad">
        <div style="margin-bottom:20px; color:#ffeb3b;">â–¼ ì „ë©´ ê´‘ê³  ì˜ì—­</div>
        <ins class="adsbygoogle" style="display:block;width:300px;height:250px" data-ad-client="ca-pub-7258774526539144" data-ad-slot="2800802932" data-ad-format="rectangle"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        <button class="btn-main" style="margin-top:20px; background:#666;" onclick="closeAd()">ë‹«ê³  ê²°ê³¼ë³´ê¸°</button>
    </div>

    <div id="info-screen" class="overlay" style="display:none;">
        <div style="background:rgba(0,0,0,0.9); padding:20px; border-radius:15px; max-width:85%; text-align:left;">
            <h3 style="color:#ffeb3b;">ğŸ® ê²Œì„ ë°©ë²•</h3>
            <p>ì½”ì¸(+500), ë˜¥(-30%). ì‹œì„¸ í­ë“± ì „ 10ê°œ êµ¬ë§¤!</p>
            <button class="btn-main" style="width:100%;" onclick="closeInfo()">ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const container = document.getElementById('game-container');
        
        let gameState = 'ready', money = 0, cookiePrice = 4000, inventory = 0;
        let items = [], lastSpawnTime = 0, gameStartTime = 0;
        let basket = { x: 0, y: 0, w: 70, h: 70 };

        const imgDdong = new Image(); imgDdong.src = 'ddong.png';
        const imgDubai = new Image(); imgDubai.src = 'dubai.png';
        const imgCoin = new Image(); imgCoin.src = 'coin.png';

        function resizeCanvas() {
            setTimeout(() => {
                // ë¶€ëª¨ ë°•ìŠ¤ì˜ ì‹¤ì œ ê°€ì‹œ ì˜ì—­ë§Œ ì¸¡ì •í•´ì„œ ìº”ë²„ìŠ¤ í• ë‹¹
                canvas.width = container.clientWidth;
                canvas.height = container.clientHeight;
                basket.x = canvas.width / 2 - 35;
                basket.y = canvas.height - 80;
            }, 200);
        }
        window.addEventListener('resize', resizeCanvas);
        window.addEventListener('load', resizeCanvas);
        resizeCanvas();

        function startGame() {
            gameState = 'playing';
            document.getElementById('start-screen').style.display = 'none';
            gameStartTime = performance.now();
            requestAnimationFrame(gameLoop);
            setInterval(() => {
                if(gameState === 'playing') {
                    cookiePrice += Math.floor(Math.random()*150)+150;
                    document.getElementById('current-price').innerText = cookiePrice.toLocaleString();
                    updateUI();
                }
            }, 1200);
        }

        function updateUI() {
            document.getElementById('money').innerText = money.toLocaleString();
            document.getElementById('inventory').innerText = inventory;
            if(gameState === 'playing') {
                const elapsed = (performance.now() - gameStartTime) / 1000;
                document.getElementById('play-time').textContent = elapsed.toFixed(1);
            }
            const btns = [document.getElementById('buy-btn-mobile'), document.getElementById('buy-btn')];
            btns.forEach(btn => {
                if(!btn) return;
                const txt = btn.querySelector('span');
                if(money >= cookiePrice) { btn.classList.add('active'); if(txt) txt.innerText="êµ¬ë§¤"; }
                else { btn.classList.remove('active'); if(txt) txt.innerText="ëˆ ë¶€ì¡±"; }
            });
        }

        function buyCookie() {
            if(money >= cookiePrice) {
                money -= cookiePrice; inventory++;
                showMsg("Flex!", "#ffeb3b"); updateUI();
                if(inventory >= 10) endGame();
            }
        }

        function showMsg(t, c) {
            const m = document.getElementById('msg-pop');
            m.innerText = t; m.style.color = c; m.style.display = 'block';
            setTimeout(() => m.style.display = 'none', 700);
        }

        function endGame() {
            gameState = 'end';
            document.getElementById('interstitial-ad').style.display = 'flex';
        }

        function closeAd() {
            alert(`ì„±ê³µ! ê¸°ë¡: ${document.getElementById('play-time').textContent}ì´ˆ`);
            location.reload();
        }

        function shareGame() {
            navigator.clipboard.writeText(window.location.href).then(() => alert("ë§í¬ ë³µì‚¬ ì™„ë£Œ!"));
        }

        function gameLoop(time) {
            if(gameState !== 'playing') return;
            ctx.clearRect(0,0,canvas.width, canvas.height);
            if(time - lastSpawnTime > 650) {
                const r = Math.random();
                items.push({ x: Math.random()*(canvas.width-45), y: -50, type: r<0.25?'poop':(r<0.3?'real':'coin'), speed: 6 });
                lastSpawnTime = time;
            }
            for(let i=items.length-1; i>=0; i--) {
                const it = items[i]; it.y += it.speed;
                let img = it.type === 'poop' ? imgDdong : (it.type === 'real' ? imgDubai : imgCoin);
                if(img.complete) ctx.drawImage(img, it.x, it.y, 45, 45);
                if(it.y+40 > basket.y && it.x < basket.x+basket.w && it.x+40 > basket.x) {
                    if(it.type === 'coin') money += 500;
                    else if(it.type === 'poop') money = Math.floor(money*0.7);
                    else inventory++;
                    items.splice(i, 1); updateUI();
                } else if(it.y > canvas.height) items.splice(i, 1);
            }
            ctx.fillStyle = "#5d4037"; ctx.fillRect(basket.x, basket.y, basket.w, basket.h);
            ctx.fillStyle = "white"; ctx.font = "14px Jua"; ctx.fillText("ë‚˜(ì„œë¯¼)", basket.x+15, basket.y+40);
            updateUI();
            requestAnimationFrame(gameLoop);
        }

        const handleMove = (e) => {
            if(gameState !== 'playing') return;
            const x = e.touches ? e.touches[0].clientX : e.clientX;
            const rect = canvas.getBoundingClientRect();
            basket.x = x - rect.left - basket.w/2;
            if(basket.x < 0) basket.x = 0;
            if(basket.x > canvas.width - basket.w) basket.x = canvas.width - basket.w;
        };
        window.addEventListener('mousemove', handleMove);
        window.addEventListener('touchmove', (e) => { e.preventDefault(); handleMove(e); }, { passive: false });
        function showInfo() { document.getElementById('info-screen').style.display='flex'; }
        function closeInfo() { document.getElementById('info-screen').style.display='none'; }
    </script>
</body>
</html>
