<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="google-adsense-account" content="ca-pub-7258774526539144">
    <title>ë‘ë°”ì´ì«€ë“ì¿ í‚¤: ì‚¬ë¨¹ì ì„œë¯¼ë“¤ì•„</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7258774526539144" crossorigin="anonymous"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        /* 1. í™”ë©´ ë°€ë¦¼ ë° ìŠ¤í¬ë¡¤ ì›ì²œ ì°¨ë‹¨ */
        html, body {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            overflow: hidden; position: fixed;
            background: #1a1a1a; font-family: 'Jua', sans-serif;
            color: white; touch-action: none;
        }

        body {
            display: flex; flex-direction: column;
            height: 100dvh; /* ìµœì‹  ì•„ì´í° íˆ´ë°” ë†’ì´ ëŒ€ì‘ */
        }

        /* 2. ê° ì˜ì—­ ë†’ì´ ê°•ì œ ê³ ì • */
        .ad-top {
            background: #333; height: 50px !important; min-height: 50px;
            flex-shrink: 0; display: flex; align-items: center; justify-content: center;
        }

        #ui-header {
            padding: 10px; background: #222; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            flex-shrink: 0; height: 120px; border-bottom: 2px solid #444;
        }

        .ad-bottom {
            background: #333; height: 100px !important; min-height: 100px;
            flex-shrink: 0; border-top: 4px solid #444;
        }

        /* 3. ê²Œì„ ì˜ì—­ (ë‚¨ëŠ” ê³µê°„ì„ ê½‰ ì±„ì›€) */
        #game-container {
            flex-grow: 1; position: relative; width: 100%;
            background: #222; display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }

        canvas { background: #2c2c2c; display: block; max-width: 100%; max-height: 100%; }

        /* UI ìš”ì†Œ ìŠ¤íƒ€ì¼ */
        .title { color: #ffeb3b; font-size: 1.2rem; margin-bottom: 2px; }
        .price-tag { color: #ff5252; font-size: 0.9rem; }
        .stats-text { font-size: 1rem; color: #4caf50; }
        .time-text { font-size: 0.8rem; color: #2196f3; }
        
        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 100; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .start-content { background: rgba(0, 0, 0, 0.7); padding: 20px; border-radius: 20px; margin-bottom: 20px; text-align: center; }
        .btn-main { padding: 15px 35px; font-size: 1.5rem; font-family: 'Jua'; background: #4caf50; color: white; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 5px 0 #2e7d32; }
        
        #buy-btn-mobile { 
            position: absolute; top: 50%; right: 10px; transform: translateY(-50%); 
            width: 70px; height: 70px; border-radius: 50%; border: none; background: #555; 
            z-index: 50; box-shadow: 0 4px 0 #333; overflow: hidden; display: block;
        }
        #buy-btn-mobile img { width: 100%; height: 100%; object-fit: cover; opacity: 0.5; }
        #buy-btn-mobile.active { background: #ffeb3b; }
        #buy-btn-mobile.active img { opacity: 1; }
        #buy-btn-text-mobile { position: absolute; bottom: 5px; left: 0; right: 0; font-size: 0.7rem; color: white; text-shadow: 1px 1px 2px #000; font-weight: bold; text-align: center; }

        #interstitial-ad { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 200; display: none; flex-direction: column; align-items: center; justify-content: center; }
        
        @media (min-width: 769px) {
            #buy-btn-mobile { display: none; }
            #buy-btn { position: absolute; top: 50%; right: -110px; transform: translateY(-50%); width: 90px; height: 90px; border-radius: 50%; border: none; background: #555; cursor: pointer; display: block; overflow: hidden; }
            #buy-btn.active { background: #ffeb3b; }
            #buy-btn img { width: 100%; height: 100%; object-fit: cover; opacity: 0.5; }
            #buy-btn.active img { opacity: 1; }
            #buy-btn-text { position: absolute; bottom: 8px; left: 0; right: 0; color: white; font-size: 0.9rem; text-align: center; font-weight: bold; }
        }
        @media (max-width: 768px) { #buy-btn { display: none; } }
    </style>
</head>
<body oncontextmenu="return false;">
    <div class="ad-top">
        <ins class="adsbygoogle" style="display:block;width:100%;height:50px" data-ad-client="ca-pub-7258774526539144" data-ad-slot="4113884601" data-ad-format="horizontal" data-full-width-responsive="false"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <div id="ui-header">
        <div class="title">ğŸ’¸ ë–¡ìƒí•˜ëŠ” ë‘ë°”ì´ì«€ë“ì¿ í‚¤</div>
        <div class="price-tag">í˜„ì¬ ì‹œì„¸: <span id="current-price">4,000</span>ì›</div>
        <div class="stats-text">ì”ê³ : <span id="money">0</span>ì› | ì¿ í‚¤: <span id="inventory" style="color:#ffeb3b">0</span>ê°œ</div>
        <div class="time-text">í”Œë ˆì´ ì‹œê°„: <span id="play-time">0</span>ì´ˆ | ìµœê³  ê¸°ë¡: <span id="best-time">-</span></div>
        <button id="buy-btn-mobile" onclick="buyCookie()">
            <img src="dubai.png"><span id="buy-btn-text-mobile">ëˆ ë¶€ì¡±</span>
        </button>
    </div>

    <div id="game-container">
        <div id="start-screen" class="overlay">
            <div class="start-content">
                <h1 style="color:#ffeb3b; margin:0;">ğŸª<br>ë‘ë°”ì´ì«€ë“ì¿ í‚¤<br>ì‚¬ë¨¹ì ì„œë¯¼ë“¤ì•„</h1>
                <p>ë¬¼ê°€ë¥¼ ëš«ê³  ì¿ í‚¤ 10ê°œë¥¼ ìŸì·¨í•˜ì„¸ìš”!</p>
            </div>
            <div style="display:flex; gap:10px;">
                <button class="btn-main" onclick="startGame()">ê²Œì„ ì‹œì‘</button>
                <button class="btn-main" style="background:#666;" onclick="showInfo()">ë°©ë²•</button>
            </div>
            <button class="btn-main" style="margin-top:15px; background:#4A90E2; font-size:1rem; padding:10px 20px;" onclick="shareGame()">ğŸ”— ë§í¬ ê³µìœ </button>
        </div>
        <div id="msg-pop" style="position:absolute; top:30%; font-size:2rem; display:none; z-index:20; font-weight:bold; text-align:center; width:100%;"></div>
        <canvas id="gameCanvas"></canvas>
        <button id="buy-btn" onclick="buyCookie()">
            <img src="dubai.png"><span id="buy-btn-text">ëˆ ë¶€ì¡±</span>
        </button>
    </div>

    <div class="ad-bottom">
        <ins class="adsbygoogle" style="display:block;width:100%;height:100px" data-ad-client="ca-pub-7258774526539144" data-ad-slot="3832164645" data-ad-format="horizontal" data-full-width-responsive="false"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <div id="interstitial-ad">
        <div style="margin-bottom: 20px; color: #ffeb3b; text-align:center;">â–¼ ì „ë©´ ê´‘ê³  (ìˆ˜ìµ 5ë°°!)</div>
        <ins class="adsbygoogle" style="display:block;width:300px;height:250px" data-ad-client="ca-pub-7258774526539144" data-ad-slot="2800802932" data-ad-format="rectangle"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        <button class="btn-main" style="margin-top: 20px; background: #666;" onclick="closeAd()">ê´‘ê³  ë‹«ê³  ê²°ê³¼ ë³´ê¸°</button>
    </div>

    <div id="info-screen" class="overlay" style="display:none;">
        <div style="background:rgba(0,0,0,0.9); padding:20px; border-radius:15px; max-width:90%;">
            <h3 style="color:#ffeb3b;">ğŸ® ê²Œì„ ë°©ë²•</h3>
            <p>ì¢Œìš°ë¡œ ì›€ì§ì—¬ ì½”ì¸ì„ ë¨¹ê³  ë˜¥ì„ í”¼í•˜ì„¸ìš”!<br>ì‹œì„¸ê°€ ì˜¤ë¥´ê¸° ì „ ì¿ í‚¤ 10ê°œë¥¼ ì‚¬ë©´ ì„±ê³µ!</p>
            <button class="btn-main" onclick="closeInfo()">ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const container = document.getElementById('game-container');
        
        let gameState = 'ready', money = 0, cookiePrice = 4000, inventory = 0;
        let items = [], particles = [], lastSpawnTime = 0, gameStartTime = 0;
        let basket = { x: 0, y: 0, w: 70, h: 70 };

        const imgDdong = new Image(); imgDdong.src = 'ddong.png';
        const imgDubai = new Image(); imgDubai.src = 'dubai.png';
        const imgCoin = new Image(); imgCoin.src = 'coin.png';

        function resizeCanvas() {
            setTimeout(() => {
                const vh = window.innerHeight;
                canvas.width = container.clientWidth;
                canvas.height = container.clientHeight;
                basket.x = canvas.width / 2 - 35;
                basket.y = canvas.height - 80;
            }, 250);
        }
        window.addEventListener('resize', resizeCanvas);
        window.addEventListener('load', resizeCanvas);
        resizeCanvas();

        function startGame() {
            gameState = 'playing';
            document.getElementById('start-screen').style.display = 'none';
            gameStartTime = performance.now();
            requestAnimationFrame(gameLoop);
            setInterval(() => {
                if(gameState === 'playing') {
                    cookiePrice += Math.floor(Math.random() * 100) + 100;
                    document.getElementById('current-price').innerText = cookiePrice.toLocaleString();
                    updateUI();
                }
            }, 1500);
        }

        function updateUI() {
            document.getElementById('money').innerText = money.toLocaleString();
            document.getElementById('inventory').innerText = inventory;
            const elapsed = (performance.now() - gameStartTime) / 1000;
            if(gameState === 'playing') document.getElementById('play-time').textContent = elapsed.toFixed(1);

            [document.getElementById('buy-btn-mobile'), document.getElementById('buy-btn')].forEach(btn => {
                if(!btn) return;
                const txt = btn.querySelector('span');
                if(money >= cookiePrice) { btn.classList.add('active'); txt.innerText = "êµ¬ë§¤"; }
                else { btn.classList.remove('active'); txt.innerText = "ëˆ ë¶€ì¡±"; }
            });
        }

        function buyCookie() {
            if(money >= cookiePrice) {
                money -= cookiePrice; inventory++;
                showMsg("Flex!", "#ffeb3b");
                updateUI();
                if(inventory >= 10) endGame();
            }
        }

        function showMsg(text, color) {
            const m = document.getElementById('msg-pop');
            m.innerText = text; m.style.color = color; m.style.display = 'block';
            setTimeout(() => m.style.display = 'none', 700);
        }

        function endGame() {
            gameState = 'end';
            document.getElementById('interstitial-ad').style.display = 'flex';
        }

        function closeAd() {
            document.getElementById('interstitial-ad').style.display = 'none';
            alert(`ğŸ‰ ì„±ê³µ! ê¸°ë¡: ${document.getElementById('play-time').textContent}ì´ˆ`);
            location.reload();
        }

        function shareGame() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => alert("ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!"));
        }

        function gameLoop(time) {
            if(gameState !== 'playing') return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if(time - lastSpawnTime > 700) {
                const r = Math.random();
                items.push({ x: Math.random()*(canvas.width-40), y: -50, type: r<0.2?'poop':(r<0.25?'real':'coin'), speed: 5 });
                lastSpawnTime = time;
            }

            for(let i=items.length-1; i>=0; i--) {
                const it = items[i];
                it.y += it.speed;
                
                let img = it.type === 'poop' ? imgDdong : (it.type === 'real' ? imgDubai : imgCoin);
                if(img.complete) ctx.drawImage(img, it.x, it.y, 45, 45);

                if(it.y + 40 > basket.y && it.x < basket.x + basket.w && it.x + 40 > basket.x) {
                    if(it.type === 'coin') money += 500;
                    else if(it.type === 'poop') money = Math.floor(money * 0.7);
                    else inventory++;
                    items.splice(i, 1); updateUI();
                } else if(it.y > canvas.height) items.splice(i, 1);
            }

            ctx.fillStyle = "#5d4037";
            ctx.fillRect(basket.x, basket.y, basket.w, basket.h);
            ctx.fillStyle = "white"; ctx.font = "14px Jua"; ctx.fillText("ë‚˜(ì„œë¯¼)", basket.x+15, basket.y+40);
            
            updateUI();
            requestAnimationFrame(gameLoop);
        }

        const handleMove = (e) => {
            if(gameState !== 'playing') return;
            const x = e.touches ? e.touches[0].clientX : e.clientX;
            const rect = canvas.getBoundingClientRect();
            basket.x = x - rect.left - basket.w/2;
            if(basket.x < 0) basket.x = 0;
            if(basket.x > canvas.width - basket.w) basket.x = canvas.width - basket.w;
        };
        window.addEventListener('mousemove', handleMove);
        window.addEventListener('touchmove', (e) => { e.preventDefault(); handleMove(e); }, { passive: false });

        function showInfo() { document.getElementById('info-screen').style.display = 'flex'; }
        function closeInfo() { document.getElementById('info-screen').style.display = 'none'; }
    </script>
</body>
</html>
